

# 💻 k8s-onprem-3tier_InfraSystem

<img src="readme_src/ppt_title.png"/>


## ⌛️ 프로젝트 배경

기업 A는 온라인 쇼핑몰 운영 사업을 시작한 신규 IT 서비스 사업자로, 신규 고객 유입을 위한 정기 특가 상품 판매 행사를 진행할 예정입니다. 이를 위해 무중단 인프라 구축과 효율적인 트래픽 분산이 필요합니다. 기존 서버 이중화 솔루션을 통해 FT (Fault Tolerance) 솔루션을 도입하여 대량의 트래픽을 처리하고자 합니다. 또한, 서버 장애 발생 시에도 데이터 손실을 최소화하기 위해 백업 시스템을 구축할 예정입니다.


## 🔥 목표

1. 단합과 협동을 통한 팀워크 증진(Hot-Spot Line을 이용하여 전체 인프라 연결)
2. 학습 내용의 활용을 통한 복습(현재까지 진행된 교육 과정의 교육 내용을 참고)
3. 배우지 않은 기술의 개인 학습 및 적용(관련 자료 및 기술 문서 확인)
4. Wi-Fi 공유기를 경유한 로컬 PC 간의 연결을 통해 구축하는 확장 네트워크 및 자원 공유
5. 교육과정에서 학습한 기술의 실제 적용을 통한 실무 경험


## 🎬 시나리오

<img src="readme_src/ppt_sinario.png"/>


## 👁️ 구성도

<img src="readme_src/Architecture.png"/>


## 🖥️ 장비목록

<img src="readme_src/device.png"/>


## 🪡 주요 변경 사항 및 고려 사항

- 현재 온프레미스 환경에서 WEB 서비스용 머신과 WAS 서비스용 머신을 별도로 운영 중
- Kubernetes 도입을 고려하여 인프라 구성 변경 필요
- 특가 상품 판매 이벤트 시 동적인 트래픽 처리와 확장이 필요함
- 고객 데이터 보안 및 백업 필요
- 웹 페이지 업데이트가 빈번하게 이루어지며, 버전 업데이트 용이성이 요구됨
- 웹 페이지에 SSL을 적용하여 보안성 향상 및 검색 엔진 최적화(SEO) 필요


## 💡 핵심 동작

- 고객 데이터베이스의 모든 정보 입력은 Kubernetes 환경에서 진행됩니다.
- 트래픽 과부하 위험 탐지 시, 인프라 팀의 시스템 관리자는 Slack API를 통해 경고 알림을 받습니다.
- 트래픽 과부하 발생 시, CPU 사용량 증가에 대비해 자동으로 새로운 Pod가 생성됩니다.
- 고객 데이터베이스에 대한 접근은 반드시 IPSec 통신 방식을 사용하는 VPN 연결이 필요합니다.
- 데이터베이스의 백업 방식으로는 주기적인 스냅샷과 함께, 필요에 따라 Blue/Green 또는 카나리 배포 방식을 적용하여 데이터베이스의 버전 업그레이드를 진행할 수 있습니다. 이를 통해, 중요한 데이터의 안전성을 보장하고, 업그레이드 과정에서 발생할 수 있는 문제를 최소화할 수 있습니다.


## 📂 결과

1. 외부에서 공개된 IP를 통하여 내부의 Bastion Host로 SSH연결을 수행할 수 있다.
2. K8S 클러스터를 구현하여 자원의 효율성과 고가용성, 복구력을 향상시켰습니다.
3. 온프레미스로 DB를 구현하여 보안과, 복구능력, 고 가용성을 향상시켰습니다.
4. NFS를 구축하여 다운된 DB 서버의 복구를 도울 수 있게 되었습니다.
5. Replica DB를 구현하여 고객 데이터 손실을 방지하고 장애에 대비할 수 있게 되었습니다.
6. LB를 구축하여 트래픽을 분산 처리할 수 있게 되었고, SSL을 LB에 적용하여 보안성 향상 및 검색 엔진 최적화(SEO)를 향상시켰습니다.

## 🏷️ 느낀점
이번 프로젝트를 통해 여러 가지 기술과 도구를 활용하여 가상의 기업 A의 고객 데이터 보안과 서비스 신뢰성을 강화하고, 향후 성장에 대비할 수 있는 기반을 마련하는 데에 좋은 경험이었습니다. 또한, 각자가 맡은 역할을 성실히 수행하고 서로의 의견을 존중하며 함께 문제를 해결하여 프로젝트를 성공적으로 마칠 수 있었습니다. 네트워크 설정은 이번 프로젝트에서 가장 중요하면서도 기본적인 부분이었습니다. 
특히, 서로 다른 서버 간의 통신을 원활히 구성하기 위해서는 그동안 배웠던 IP 주소 할당, 서브넷 마스크 설정, 라우팅 등에 대한 이해가 필수적으로 필요했습니다. 처음에는 예상치 못한 문제들도 많이 발생하여 어려움이 있었지만 팀원들과 함께 자료를 찾아가며 이해하는 과정을 통해 다양한 네트워크 설정 사례를 경험할 수 있었습니다.
이 프로젝트의 핵심이었던 가상화 기술과 쿠버네티스 클러스터 구축에 대한 실제 경험이 부족하여 복잡한 구성도를 그리는 데에 어려움이 있었습니다. 그러나 팀원들과 다양한 문제들에 대해 논의하며 쿠버네티스를 활용하여 자원의 효율성과 고가용성을 확보하면서도 버전 업데이트와 서비스 확장이 용이하도록 인프라를 구축할 수 있었습니다. 
또한, Replica DB와 온프레미스 DB 백업을 통해 고객 데이터의 안전성을 보장하고 장애 대응 능력을 향상시킬 수 있었고, NFS를 활용한 서버 복구 기능은 데이터 손실을 최소화하고 서비스 지속성을 보장하는 등 실제 업무에서도 유용하게 활용될 수 있는 기술등을 경험할 수 있었습니다. 이번 프로젝트를 통해 단순히 기술적인 측면뿐만 아니라 팀원 간의 협업과 의사 소통의 중요성을 다시 한 번 깨달았습니다. 또한, 새로운 기술에 도전하고 문제를 해결하는 과정에서의 즐거움과 성취감을 느낄 수 있었습니다. 앞으로도 이러한 경험을 살려 더 나은 프로젝트를 수행하고 발전하는 데에 기여하고 싶습니다.

